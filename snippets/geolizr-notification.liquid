{% comment %}ly_global_begin{% endcomment %}{% include 'ly-global' %}{% comment %}ly_global_end{% endcomment %}{% if shop.metafields.geolizr.notification_widget_enabled == 'true' %}
<script>
  Geolizr.init(function($) {
    Geolizr.getGeoData(function(geoData) {
        Geolizr.notifications = {% comment %}ly_code_replace_for_[ shop.metafields.geolizr.notifications ]_begin{% endcomment %}{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign ns = language | append: 'geolizr' %}{% assign key = 'notifications' %}{% if shop.metafields[ns][key] %}{% assign ly_translation = shop.metafields[ns][key] %}{% else %}{% assign ly_translation =  shop.metafields.geolizr.notifications  %}{% endif %}{{ ly_translation }}{% comment %}ly_code_replace_end{% endcomment %};
        Geolizr.regionToNotification = {% comment %}ly_code_replace_for_[ shop.metafields.geolizr.country_to_notification ]_begin{% endcomment %}{% if request.host %}{% assign host = request.host %}{% assign domains = shop.metafields.language_domains %}{% for domain in domains %}{% assign key = domain | first %}{% assign value = domain | last | split: ',' %}{% if value contains host %}{% assign language = key %}{% endif %}{% endfor %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% else %}{% assign language = cart.attributes["language"] %}{% if language == nil %}{% assign language = shop.metafields["languages"]["default"] %}{% endif %}{% endif %}{% assign ns = language | append: 'geolizr' %}{% assign key = 'country_to_notification' %}{% if shop.metafields[ns][key] %}{% assign ly_translation = shop.metafields[ns][key] %}{% else %}{% assign ly_translation =  shop.metafields.geolizr.country_to_notification  %}{% endif %}{{ ly_translation }}{% comment %}ly_code_replace_end{% endcomment %};
        var notification = Geolizr.getNotification();
        Geolizr.notificationShadowUrl = '{% comment %}ly_asset_replace_for_[ 'geolizr-notification-shadow.png' | asset_url ]_begin{% endcomment %}{% assign ly_asset = 'geolizr-notification-shadow.png' %}{% include 'ly-asset' with ly_asset %}{{ ly_translation  }}{% comment %}ly_asset_replace_end{% endcomment %}';
        Geolizr.notification(notification, geoData, Geolizr.notificationShadowUrl);
    });
  });
</script>
{% endif %}